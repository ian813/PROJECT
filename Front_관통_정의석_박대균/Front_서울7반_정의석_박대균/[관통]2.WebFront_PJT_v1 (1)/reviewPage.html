<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  </head>
  <body>

    
    <header>
      <!-- 다른 페이지로의 이동을 담아두는 태그 -->
      <!-- 통상적으로 웹 페이지의 상단 메뉴 항목 -->
      <nav class="navbar navbar-dark bg-primary-subtle">
        <div class="container-fluid">
            <a class="text-black " style = "text-decoration: none; font-size: 30px;" href="./main.html">SSAFIT</a>
            <ul class = "nav justify-content-end">
              <li class = "nav-item" style="list-style : none;">
                <a class = "nav-link text-secondary" href = "./main.html">Home</a>
              </li>
              <li class = "nav-item" style="list-style : none;">
                <a class = "nav-link text-secondary" href = "login.html">
                    <img src = "./img/padlock_icon_128402.png" height="30" width="30"></img>
                    <span class="text-black">&nbsp;로그인</span>
                </a>
              </li>
              <li class = "nav-item" style="list-style : none;">
                <a class = "nav-link text-secondary" href = "register.html">
                    <img src = "./img/register_login_signup_icon_219991.png" height="30" width="30"></img>
                    <span class="text-black">&nbsp;회원가입</span>
                </a>
              </li>
            </ul>
         </div>
     </nav>
      
    </header>

    <main>
      <div>
        <section class="text-center">
          <br>
          <br>
          <span class="bi bi-star" style = " font-size:3em;"></span>
          <span style = " font-size:3em;">운동영상 리뷰</span>
          <span class="bi bi-star" style = " font-size:3em;"></span>
          <hr />
          
        </section>

        <section class >
          <div class="row">
            <!--<div class = "col-lg-6 col-sm-12 text-lg-star text-center">-->
            <div class = "col-lg-2 col-sm-12 text-lg-star text-center">
             <!-- Button trigger modal -->

              <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                리뷰 작성
              </button>

              <!-- Modal -->
              <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg" >
                  <div class="modal-content">
                    <div class="modal-header">
                      <h1 class="modal-title">운동영상 리뷰</h1>
                    </div>

                    <div class="modal-body">
                      <form>
                        <div class="mb-3">
                          <input type="text" class="form-control" id="exampleFormControlInput1" placeholder="영상이름">
                        </div>
                        <div class="mb-3">
                          <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" placeholder="리뷰내용"></textarea>
                        </div>
                      </form>
 
                    </div>
                    <div class="modal-footer">
                      <button type="button" id="register">등록</button>
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
              
            <!--<div class = "col-lg-6 col-sm-12 text-lg-end text-center">-->
            <div class = "col-lg-9 col-sm-12 text-lg-end text-center">    
              <form>
                <input
                  type="search"
                  placeholder="제목,내용으로 검색"
                  aria-label="Search"
                />
              </form>
            </div>
          </div>
          <hr/>
          <div> 
            <div class = "container">
              <div class = "row">
                <div class = "col-1 text-center">번호</div>
                <div class = "col-1 text-center">영상이름</div>
                <div class = "col-5">리뷰내용</div>
                <div class = "col-1 text-center">조회수</div>
                <div class = "col-3">작성시간</div>
                <div class = "col-1"> </div>
              </div>
              <hr/>
            </div>

            <div class = "container reviewdt">
              <div class ="row reviewBaby" id="reviewOut">
                <!--리뷰들이 출력 되는 곳-->
                <!--리뷰들이 출력 되는 곳-->
                <!--리뷰들이 출력 되는 곳-->
                <!--리뷰들이 출력 되는 곳-->
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <footer>
      <br>
      <br>
      <div class = "text-center">
        < 1 >
      </div>
      
    </footer>

    <script>
      //모달에서 작성한 리뷰 저장하기
      let registerBtn = document.querySelector('#register');
      let reviewTitle = document.querySelector('#exampleFormControlInput1');
      let reviewContent = document.querySelector('#exampleFormControlTextarea1');
      let idx = 1;
      vistiNum = 0;
      const date = new Date();

      let deleteList = [];

      registerBtn.addEventListener("click",function(event){ //무기명 함수선언, 함수도 값이다
        //찜한 영화 설명 저장
        let title = JSON.stringify(reviewTitle.value);
        let content = JSON.stringify(reviewContent.value);
        let review = { num : idx, title:title, content:content, visit:vistiNum, time:date.toUTCString() }

        
        //로컬리스트 저장
        localStorage.setItem(review.num, JSON.stringify(review));
        

        //로컬리스트에서 불러오기
        const reviewB = JSON.parse(localStorage.getItem(idx));
        
        let el = document.querySelector("#reviewOut"); //출력 위치 선정

    
        //출력
        let userItem = `
                <div class = "col-1 text-center">${reviewB['num']}</div>
                <div class = "col-1">${reviewB['title']}</div>
                <div class = "col-5 ">${reviewB['content']}</div>
                <div class = "col-1 text-center">${reviewB['visit']}</div>
                <div class = "col-3">${reviewB['time']}</div>
                <button class = "col-1 delete">삭제</div>
            `;
        el.innerHTML += userItem;
        idx++;


        deleteList = document.querySelectorAll('.delete');

        for(let i = 0; i<deleteList.length;i++){
          let deleteButton = deleteList[i];
          let deleteA = document.querySelectorAll('.reviewdt');
          let deleteB = document.querySelectorAll('.reviewBaby');

          console.log(deleteA);
          console.log(deleteB);

          deleteButton.addEventListener("click",function(){ //무기명 함수선언, 함수도 값이다
           
        })
      }
        
    })
    </script>

  </body>
</html>
